<div class="login-container">
  <h1>Iniciar Sesión</h1>
  <!-- Agrega esto arriba del formulario -->
@if (registered) {
  <div class="success-message">
    ¡Registro exitoso! Por favor inicia sesión.
  </div>
}

  @if (error()) {
    <div class="error-message">{{ error() }}</div>
  }

  <form (ngSubmit)="onSubmit()" #loginForm="ngForm">
    <div class="form-group">
      <label for="email">Email</label>
      <input
        type="email"
        id="email"
        name="email"
        [(ngModel)]="email"
        required
        email
        #emailRef="ngModel"
      />
      @if (emailRef.invalid && emailRef.touched) {
        <div class="validation-error">Email es requerido y debe ser válido</div>
      }
    </div>

    <div class="form-group">
      <label for="password">Contraseña</label>
      <input
        type="password"
        id="password"
        name="password"
        [(ngModel)]="password"
        required
        minlength="6"
        #passwordRef="ngModel"
      />
      @if (passwordRef.invalid && passwordRef.touched) {
        <div class="validation-error">Contraseña debe tener al menos 6 caracteres</div>
      }
    </div>

    <button type="submit" [disabled]="loading() || loginForm.invalid">
      @if (loading()) {
        <span>Procesando...</span>
      } @else {
        <span>Iniciar Sesión</span>
      }
    </button>
  </form>

  <div class="register-link">
    ¿Aún no tienes una cuenta? 
    <a routerLink="/register">Regístrate para comenzar</a>
  </div>
</div>