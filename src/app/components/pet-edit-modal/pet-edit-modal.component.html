<div class="modal-backdrop" *ngIf="visible">
  <div class="modal" (click)="$event.stopPropagation()">
    <h2>Información de Mascota</h2>
    <form (ngSubmit)="onSave()">
      <!-- Nombre -->
      <div class="input-group">
        <label>Nombre:</label>
        <div class="edit-row">
          <input
            type="text"
            [(ngModel)]="mascota.name_pet"
            name="name_pet"
            [readonly]="!editField.name_pet"
            required
          />
          <button type="button" class="edit-btn" (click)="toggleEdit('name_pet')" tabindex="-1">
            <img src="/edit-icon.svg" alt="Editar" />
          </button>
        </div>
      </div>

      <!-- Edad -->
      <div class="input-group">
        <label>Edad:</label>
        <div class="edit-row">
          <input
            type="number"
            [(ngModel)]="mascota.age_pet"
            name="age_pet"
            [readonly]="!editField.age_pet"
            min="0"
            required
          />
          <button type="button" class="edit-btn" (click)="toggleEdit('age_pet')" tabindex="-1">
            <img src="/edit-icon.svg" alt="Editar" />
          </button>
        </div>
      </div>

      <!-- Especie -->
      <div class="input-group">
        <label>Especie:</label>
        <div class="edit-row">
          <input
            type="text"
            [(ngModel)]="mascota.species"
            name="species"
            [readonly]="!editField.species"
            required
          />
          <button type="button" class="edit-btn" (click)="toggleEdit('species')" tabindex="-1">
            <img src="/edit-icon.svg" alt="Editar" />
          </button>
        </div>
      </div>

      <!-- Sexo -->
      <div class="input-group">
        <label>Sexo:</label>
        <div class="edit-row">
          <input
            type="text"
            [(ngModel)]="mascota.sex"
            name="sex"
            [readonly]="!editField.sex"
            required
          />
          <button type="button" class="edit-btn" (click)="toggleEdit('sex')" tabindex="-1">
            <img src="/edit-icon.svg" alt="Editar" />
          </button>
        </div>
      </div>

      <!-- Raza -->
      <div class="input-group">
        <label>Raza:</label>
        <div class="edit-row">
          <input
            type="text"
            [(ngModel)]="mascota.race"
            name="race"
            [readonly]="!editField.race"
            required
          />
          <button type="button" class="edit-btn" (click)="toggleEdit('race')" tabindex="-1">
            <img src="/edit-icon.svg" alt="Editar" />
          </button>
        </div>
      </div>

      <!-- Código del collar (solo admin puede editar) -->
      <div class="input-group">
        <label>Código del collar:</label>
        <div class="edit-row">
          <input
            type="text"
            [(ngModel)]="mascota.id_collar"
            name="id_collar"
            [readonly]="!editField.id_collar || !admin"
            required
          />
          <button
            *ngIf="admin"
            type="button"
            class="edit-btn"
            (click)="toggleEdit('id_collar')"
            tabindex="-1"
          >
            <img src="/edit-icon.svg" alt="Editar" />
          </button>
        </div>
      </div>

      <!-- Botones -->
      <div class="modal-buttons">
        <button type="submit" class="btn-guardar">Guardar</button>
        <button type="button" class="btn-cancelar" (click)="onCancel()">Cancelar</button>
      </div>
    </form>
  </div>
</div>