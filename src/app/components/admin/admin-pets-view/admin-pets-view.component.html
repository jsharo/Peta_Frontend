<div class="mobile-container">
  <!-- Encabezado con logo y botón de cerrar sesión -->
  <div class="header">
    <img src="/PETA-logo1.svg" alt="Logo" class="logo" />
    <button class="logout-btn" (click)="logout()">Cerrar Sesión</button>
  </div>

  <!-- Título -->
  <h1 class="title">Mascotas</h1>

  <!-- Botón Registrar -->
  <div class="register-container">
    <button class="register-btn" (click)="irARegistrarMascota()">
      <span class="plus">+</span> Registrar mascota
    </button>
  </div>

  <!-- Contador de mascotas -->
  <p class="count">Total Mascotas: {{ mascotas.length }}</p>

  <!-- Lista -->
  <div *ngFor="let mascota of mascotas; trackBy: trackByMascota" class="mascota-card">
    <div class="foto-nombre">
      <img
        *ngIf="mascota.photo"
        [src]="'http://localhost:3000/uploads/pets/' + mascota.photo"
        alt="Foto mascota"
        class="mascota-foto"
      />
      <span class="nombre">{{ mascota.name_pet }}</span>
    </div>
    <!-- Dentro de la tarjeta de mascota -->
    <button class="ver-btn" (click)="abrirModalVer(mascota)">Ver</button>
  </div>

  <!-- Mensaje de carga -->
  <div *ngIf="loading" class="loading-message">
    <p>Cargando mascotas...</p>
  </div>

  <!-- Mensaje de error -->
  <div *ngIf="error" class="error-message">
    <p>{{ error }}</p>
    <button (click)="cargarMascotas()" class="retry-btn">Reintentar</button>
  </div>

  <!-- Mensaje cuando no hay mascotas -->
  <div *ngIf="!loading && !error && mascotas.length === 0" class="no-pets-message">
    <p>No se encontraron mascotas para este usuario</p>
  </div>
</div>

<!-- Modal para ver/editar mascota (fuera del contenedor principal) -->
<div *ngIf="modalAbierto" class="modal-backdrop">
  <app-pet-view-modal
    [mascota]="mascotaSeleccionada"
    [visible]="modalAbierto"
    (close)="cerrarModal()"
    (save)="guardarCambiosModal($event)">
  </app-pet-view-modal>
</div>