<div class="mascota-wrapper">
  <div class="top-bar">
    <img src="/PETA-logo1.svg" alt="Logo" class="logo" />
  </div>

  <h2>Registrar Mascota</h2>

  <form (ngSubmit)="registrarMascota()" class="mascota-formulario">
    <!-- Mostrar nombre del cliente si es admin -->
    <div *ngIf="isAdminRegistering && clientName" class="client-info">
      <p>Registrando mascota para: <strong>{{ clientName }}</strong></p>
    </div>

    <!-- Mensaje de error -->
    <div *ngIf="errorFoto" class="error">
      {{ errorFoto }}
    </div>

    <!-- Nombre -->
    <div class="form-label">
      <label>Nombre</label>
      <input type="text" [(ngModel)]="mascota.name_pet" name="name_pet" placeholder="Ingrese nombre de la mascota" required>
    </div>

    <!-- Edad -->
    <div class="form-label">
      <label>Edad</label>
      <input type="number" [(ngModel)]="mascota.edad" name="edad" placeholder="Ingrese edad" required>
    </div>

    <!-- Especie -->
    <div class="form-label">
      <label>Especie</label>
      <input type="text" [(ngModel)]="mascota.species" name="species" placeholder="Ingrese especie" required>
    </div>

    <!-- Raza -->
    <div class="form-label">
      <label>Raza</label>
      <input type="text" [(ngModel)]="mascota.race" name="race" placeholder="Ingrese raza" required>
    </div>

    <!-- Sexo -->
    <div class="form-label">
      <label>Sexo</label>
      <select [(ngModel)]="mascota.sex" name="sex" required>
        <option value="">Seleccione sexo</option>
        <option value="M">Macho</option>
        <option value="F">Hembra</option>
      </select>
    </div>

    <!-- Código del collar -->
    <div class="form-label">
      <label>Código del collar</label>
      <input type="text" [(ngModel)]="mascota.id_collar" name="id_collar" placeholder="Ingrese código del collar" required>
    </div>

    <!-- Fotografía -->
    <div class="form-label">
      <label>Fotografía</label>
      <input type="file" (change)="onFileChange($event)" accept="image/*">

      <div *ngIf="fotoPreview" class="photo-preview">
        <img [src]="fotoPreview" alt="Vista previa de la foto">
      </div>
    </div>

    <!-- Botones de acción -->
    <div class="buttons">
      <button type="button" class="btn-cancelar" (click)="cancelar()">Cancelar</button>
      <button type="submit" class="btn-registrar" [disabled]="!isFormValid() || isLoading">
        {{ isLoading ? 'Registrando...' : 'Registrar' }}
      </button>
    </div>
  </form>
</div>